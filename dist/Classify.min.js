define("Utils/lang/kindOf",[],function(){function d(d){return d===null?"Null":d===c?"Undefined":a.exec(b.call(d))[1]}var a=/^\[object (.*)\]$/,b=Object.prototype.toString,c;return d}),define("Utils/lang/isKind",["./kindOf"],function(a){function b(b,c){return a(b)===c}return b}),define("Utils/lang/isFunction",["./isKind"],function(a){function b(b){return a(b,"Function")}return b}),define("Utils/lang/isString",["./isKind"],function(a){function b(b){return a(b,"String")}return b}),define("Utils/array/every",[],function(){var a=Array.prototype.every?function(a,b,c){return a.every(b,c)}:function(a,b,c){var d=!0,e=a.length>>>0;while(e--)if(e in a&&!b.call(c,a[e],e,a)){d=!1;break}return d};return a}),define("Utils/array/indexOf",[],function(){var a=Array.prototype.indexOf?function(a,b,c){return a.indexOf(b,c)}:function(a,b,c){c=c||0;var d=a.length>>>0,e=c<0?d+c:c;for(;e<d;e++)if(a[e]===b)return e;return-1};return a}),define("Utils/array/contains",["./indexOf"],function(a){function b(b,c){return a(b,c)!==-1}return b}),define("Utils/array/some",["require"],function(a){var b=Array.prototype.some?function(a,b,c){return a.some(b,c)}:function(a,b,c){var d=!1,e=a.length>>>0;while(e--)if(e in a&&b.call(c,a[e],e,a)){d=!0;break}return d};return b}),define("Utils/lang/isObject",["./isKind"],function(a){function b(b){return a(b,"Object")}return b}),define("Utils/lang/isArray",["./isKind"],function(a){var b=Array.isArray||function(b){return a(b,"Array")};return b}),define("Utils/lang/isUndefined",[],function(){function b(b){return b===a}var a;return b}),define("Utils/object/hasOwn",[],function(){function a(a,b){return Object.prototype.hasOwnProperty.call(a,b)}return a}),define("Utils/object/forOwn",["../lang/isObject","./hasOwn"],function(a,b){function e(){d=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=!0;for(var a in{toString:null})c=!1}function f(b,f,h){var i,j=0;if(!a(b))throw new TypeError("forOwn called on a non-object");c==null&&e();for(i in b)g(f,b,i,h);if(c)while(i=d[j++])g(f,b,i,h)}function g(a,c,d,e){b(c,d)&&a.call(e,c[d],d,c)}var c,d;return f}),define("Utils/object/keys",["./forOwn"],function(a){var b=Object.keys||function(b){var c=[];return a(b,function(a,b){c.push(b)}),c};return b}),define("Utils/object/mixIn",["./hasOwn"],function(a){function b(b,c){var d=1,e=arguments.length,f,g;while(g=arguments[d++])for(f in g)a(g,f)&&(b[f]=g[f]);return b}return b}),define("Utils/lang/createObject",["../object/mixIn"],function(a){function b(b,c){function d(){}return d.prototype=b,a(new d,c)}return b}),define("Utils/array/forEach",[],function(){var a=Array.prototype.forEach?function(a,b,c){a.forEach(b,c)}:function(a,b,c){for(var d=0,e=a.length>>>0;d<e;d++)d in a&&b.call(c,a[d],d,a)};return a}),define("Utils/array/filter",["./forEach"],function(a){var b=Array.prototype.filter?function(a,b,c){return a.filter(b,c)}:function(b,c,d){var e=[];return a(b,function(a,b,f){c.call(d,a,b,f)&&e.push(a)}),e};return b}),define("Utils/array/unique",["./indexOf","./filter"],function(a,b){function c(a){return b(a,d)}function d(b,c,d){return a(d,b,c+1)===-1}return c}),define("Utils/array/intersection",["./unique","./filter","./every","./contains"],function(a,b,c,d){function e(e){var f=Array.prototype.slice.call(arguments,1),g=b(a(e),function(a){return c(f,function(b){return d(b,a)})});return g}return e}),define("Utils/array/difference",["./unique","./filter","./some","./contains"],function(a,b,c,d){function e(e){var f=Array.prototype.slice.call(arguments,1),g=b(a(e),function(a){return!c(f,function(b){return d(b,a)})});return g}return e}),define("Trinity/common/verifyReserved",["Utils/object/forOwn","Utils/array/contains","Utils/array/difference"],function(a,b,c){function f(f,g,h){var i=g==="normal"||!g?d:e;h&&(i=c(i,h)),a(f,function(a,c){if(b(i,c)||Object.prototype[c])throw new TypeError('"'+f.Name+'" is using a reserved keyword: '+c)})}var d=["$constructor","$initializing"],e=["$class","$abstract","$interface","$binds","$statics"];return f}),define("Utils/array/combine",["./indexOf"],function(a){function b(b,c){var d,e=c.length;for(d=0;d<e;d++)a(b,c[d])===-1&&b.push(c[d]);return b}return b}),define("Utils/array/append",[],function(){function a(a,b){return Array.prototype.push.apply(a,b),a}return a}),define("Utils/lang/bind",[],function(){function a(a,b){return Array.prototype.slice.call(a,b||0)}function b(b,c,d){var e=a(arguments,2);return function(){return b.apply(c,e.concat(a(arguments)))}}return b}),define("Utils/lang/isArguments",["./isKind"],function(a){var b=a(arguments,"Arguments")?function(b){return a(b,"Arguments")}:function(a){return!!a&&!!Object.prototype.hasOwnProperty.call(a,"callee")};return b}),define("Utils/lang/toArray",["./isArray","./isObject","./isArguments"],function(a,b,c){function e(e){var f;return e==null?f=[]:e&&e!==d&&(a(e)||c(e)||b(e)&&"length"in e)?f=Array.prototype.slice.call(e):f=[e],f}var d=this;return e}),define("Utils/array/insert",["./difference","../lang/toArray"],function(a,b){function c(c,d){var e=a(b(arguments).slice(1),c);return e.length&&Array.prototype.push.apply(c,e),c.length}return c}),define("Trinity/Classify.Interface",["Utils/lang/isObject","Utils/lang/isFunction","Utils/object/hasOwn","Utils/object/forOwn","Utils/array/combine","Utils/array/insert","Utils/lang/createObject","./common/verifyReserved"],function(a,b,c,d,e,f,g,h){function i(g){var i=g.Super?g.Super.$constructor:null;g.$statics=[];if(c(g.prototype,"Statics")){if(!a(g.prototype.Statics))throw new TypeError('Statics definition for "'+g.prototype.Name+'" must be an object.');h(g.prototype.Statics,"statics"),d(g.prototype.Statics,function(a,c){b(a)&&f(g.$statics,c)})}i&&i.$statics?e(g.$statics,i.$statics):g.$statics.length||delete g.$statics}function j(d){if(!a(d))throw new TypeError('Argument "params" must be an object.');d.Name=d.Name||"Unnamed",h(d);var e=function(){throw new Error("Interfaces cannot be instantiated.")};if(c(d,"Extends")){if(!b(d.Extends)||!d.Extends.$interface)throw new TypeError('The parent interface of "'+d.Name+'" is not a valid interface (defined in Extends).');e.Super=d.Extends.prototype,delete d.Extends,e.prototype=g(e.Super,d),delete e.prototype.Extends}else e.prototype=d;return e.prototype.$constructor=e,i(e),delete e.prototype.Statics,e.$interface=!0,e}return j}),define("Trinity/Classify.Abstract",["Utils/lang/isObject","Utils/lang/isFunction","Utils/lang/isArray","Utils/lang/toArray","Utils/object/forOwn","Utils/object/hasOwn","Utils/array/forEach","Utils/array/combine","Utils/array/insert","Utils/array/contains","./common/verifyReserved","./Classify","require"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(c,d){if(!a(c))throw new TypeError('Abstracts defined in abstract class "'+d.prototype.Name+"' must be an object.");k(c),e(c,function(f,g){if(g!=="Statics"){if(!b(f))throw new TypeError('Value for "'+g+'" in abstracts of abstract class "'+d.prototype.Name+"' must be a function.");if(d.prototype[g])throw new Error('Abstract method "'+g+'" of abstract class "'+d.prototype.Name+"' is already implemented and cannot be declared as abstract anymore.");i(d.$abstract.normal,g)}else{if(!a(c.Statics))throw new TypeError('Statics definition for abstract class of abstract class "'+d.prototype.Name+'" must be an object.');k(c.Statics,"statics"),e(c.Statics,function(a,c){if(!b(a))throw new TypeError('Value for "'+c+'" in abstracts (statics) of abstract class "'+d.prototype.Name+"' must be a function.");if(d.$statics&&j(d.$statics,c))throw new Error('Abstract static method "'+c+'" of abstract class "'+d.prototype.Name+"' is already implemented and cannot be declared as abstract anymore.");i(d.$abstract.statics,c)})}})}function o(a,f){var h=d(a),l=["$constructor","$initializing"];if(!a.length&&!c(h))throw new TypeError('Implements of abstract class "'+f.prototype.Name+'" must be an interface or an array of interfaces.');g(h,function(a,c){if(!b(a)||!a.$interface)throw new TypeError("Entry at index "+c+' in Implements of class "'+f.prototype.Name+'" is not a valid interface.');k(a.prototype,"normal",l),e(a.prototype,function(c,d){if(!j(l,d)&&b(c)){if(f.prototype[d]&&!b(f[d]))throw new Error('Abstract class "'+f.prototype.Name+'" does not implement interface "'+a.prototype.Name+'" correctly, method "'+d+'()" was not found.');i(f.$abstract.normal,d)}}),a.$statics&&g(a.$statics,function(a){(!f.$statics||!j(f.$statics,a))&&i(f.$abstract.statics,a)})})}return function(c){l=m("./Classify");var d;if(!a(c))throw new TypeError('Argument "params" must be an object.');c.Name=c.Name||"Unnamed";var e=c.initialize,g,i={},j={normal:[],statics:[]};return b(c.Extends)?(g=c.Extends,c.Extends.$class&&(e=e||function(){g.prototype.initialize.apply(this,arguments)}),c.Extends.$abstract&&(h(j.normal,c.Extends.$abstract.normal),h(j.statics,c.Extends.$abstract.statics))):e=e||function(){},c.initialize=function(){if(!this.$initializing)throw new Error("An abstract class cannot be instantiated.");e.apply(this,arguments)},f(c,"Abstracts")&&(i.Abstracts=c.Abstracts),f(c,"Implements")&&(i.Implements=c.Implements,delete c.Implements),c.$abstract=!0,d=l(c),delete d.prototype.$abstract,d.$abstract=j,f(i,"Abstracts")&&n(i.Abstracts,d),f(i,"Implements")&&o(i.Implements,d),d}}),define("Trinity/Classify",["Utils/lang/isFunction","Utils/lang/isString","Utils/array/intersection","Utils/array/unique","./common/verifyReserved","Utils/lang/isObject","Utils/lang/isArray","Utils/lang/isUndefined","Utils/lang/createObject","Utils/object/mixIn","Utils/object/keys","Utils/object/hasOwn","Utils/array/forEach","Utils/array/combine","Utils/array/append","Utils/lang/bind","Utils/lang/toArray","./Classify.Abstract","./Classify.Interface"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){function u(a,b){a.$statics&&(b.$statics||(b.$statics=[]),m(a.$statics,function(c){h(b[c])&&(b[c]=a[c],b.$statics.push(c))}),b.$statics.length||delete b.$statics)}function v(b,c){var e,i,k,l;l=q(b);if(!l.length&&!g(b))throw new TypeError('Borrows of "'+c.prototype.Name+'" must be a class/object or an array of classes/objects.');if(l.length!==d(l).length)throw new Error('There are duplicate entries defined in Borrows of "'+c.prototype.Name+'".');for(e=l.length-1;e>=0;e-=1){if((!a(l[e])||!l[e].$class||l[e].$abstract)&&(!f(l[e])||l[e].$constructor))throw new TypeError("Entry at index "+e+' in Borrows of class "'+c.prototype.Name+'" is not a valid class/object (abstract classes and instances of classes are not supported).');if(f(l[e]))try{i=t(j({},l[e])).prototype}catch(m){throw new Error("Unable to define object as class at index "+e+' in Borrows of class "'+c.prototype.Name+'" ('+m.message+").")}else i=l[e].prototype;for(k in i)h(c.prototype[k])&&(c.prototype[k]=i[k]);u(i.$constructor,c),i.$constructor.$binds&&(c.$binds=c.$binds||[],n(c.$binds,i.$constructor.$binds))}}function w(a,b,c){var d;for(d=a.length-1;d>=0;d-=1)c[a[d]]=p(c[a[d]],b)}function x(b,c){var d=q(b),e=function(b){if(!a(c[b])||!l(c,b))throw new Error('Class "'+c.prototype.Name+'" does not implement interface "'+this.prototype.Name+'" correctly, static method "'+b+'()" was not found.')};if(!d.length&&!g(b))throw new TypeError('Implements of class "'+c.prototype.Name+'" must be an interface or an array of interfaces.');m(b,function(b,d){var f;if(!a(b)||!b.$interface)throw new TypeError("Entry at index "+d+' in Implements of class "'+c.prototype.Name+'" is not a valid interface.');for(f in b.prototype)if(f!=="Name"&&f!=="$constructor"&&a(b.prototype[f])&&!a(c.prototype[f]))throw new Error('Class "'+c.prototype.Name+'" does not implement interface "'+b.prototype.Name+'" correctly, method "'+f+'()" was not found.');b.$statics&&m(b.$statics,e,b)})}function y(b,c){var d=b.$abstract;m(d.normal,function(d){if(!a(c.prototype[d]))throw new Error('Class "'+c.prototype.Name+'" does not implement abstract class "'+b.prototype.Name+'" correctly, method "'+d+'()" was not found.')}),m(d.statics,function(d){if(!a(c[d])||!l(c,d))throw new Error('Class "'+c.prototype.Name+'" does not implement abstract class "'+b.prototype.Name+'" correctly, static method "'+d+'()" was not found.')})}function z(e){var f=e.Super?e.Super.$constructor:null,h;if(l(e.prototype,"Binds")){h=q(e.prototype.Binds);if(!h.length&&!g(e.prototype.Binds))throw new TypeError('Binds of "'+e.prototype.Name+'" must be a string or an array of strings.');if(h.length!==d(h).length)throw new Error('There are duplicate binds in "'+e.prototype.Name+'".');if(c(e.$binds||[],h).length>0)throw new Error('There are binds in "'+e.prototype.Name+'" that are already being bound by a mixin (used in Borrows).');e.$binds=o(e.$binds||[],h),delete e.prototype.Binds}if(f&&f.$binds){if(c(e.$binds||[],f.$binds).length>0)throw new Error('There are binds in "'+e.prototype.Name+'" that are already being bound in the parent class.');e.$binds=o(e.$binds||[],f.$binds)}else e.$binds&&!e.$binds.length&&delete e.$binds;e.$binds&&m(e.$binds,function(c){if(!b(c))throw new TypeError('All bind entries of "'+e.Name+'" must be a string.');if(!a(e.prototype[c])&&(!e.prototype.Abstracts||!e.prototype.Abstracts[c]))throw new Error('Method "'+c+'()" referenced in "'+e.prototype.Name+'" binds does not exist.')})}function A(a){if(l(a.prototype,"Statics")){if(!f(a.prototype.Statics))throw new TypeError('Statics definition for "'+a.prototype.Name+'" must be an object.');e(a.prototype.Statics,"statics"),j(a,a.prototype.Statics),a.$statics=k(a.prototype.Statics)}a.Super&&u(a.Super.$constructor,a)}function B(a){var b;for(b in a)g(a[b])?a[b]=[].concat(a[b]):f(a[b])&&(a[b]=j({},a[b]))}function C(a){return function(){B(this),this.$constructor.$binds&&w(this.$constructor.$binds,this,this),this.$constructor.$abstract||(this.$initializing=!0),a.apply(this,arguments),delete this.$initializing}}var t;return t=function(b){if(!f(b))throw new TypeError('Argument "params" must be an object.');b.Name=b.Name||"Unnamed",e(b);if(l(b,"Abstracts")&&!b.$abstract)throw new Error('Class "'+b.Name+'" has abstract methods, therefore it must be defined as abstract.');var c,d;if(l(b,"Extends")){if(!a(b.Extends)||!b.Extends.$class)throw new TypeError('Specified parent class in Extends of "'+b.Name+'" is not a valid class.');d=b.Extends,delete b.Extends,b.initialize=b.initialize||function(){d.prototype.initialize.apply(this,arguments)},c=C(b.initialize),c.Super=d.prototype,c.prototype=i(d.prototype,b)}else b.initialize=b.initialize||function(){},c=C(b.initialize),c.prototype=b;return c.prototype.$constructor=c,c.$class=!0,A(c),l(b,"Borrows")&&(v(b.Borrows,c),delete c.prototype.Borrows),z(c),d&&d.$abstract&&!b.$abstract&&y(d,c),l(b,"Implements")&&(b.$abstract||x(b.Implements,c),delete c.prototype.Implements),l(b,"Statics")&&delete c.prototype.Statics,c},t.Abstract=r,t.Interface=s,t})