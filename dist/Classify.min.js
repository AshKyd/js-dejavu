define("Utils/lang/kindOf",[],function(){function d(d){return d===null?"Null":d===c?"Undefined":a.exec(b.call(d))[1]}var a=/^\[object (.*)\]$/,b=Object.prototype.toString,c;return d}),define("Utils/lang/isKind",["./kindOf"],function(a){function b(b,c){return a(b)===c}return b}),define("Utils/lang/isFunction",["./isKind"],function(a){function b(b){return a(b,"Function")}return b}),define("Utils/lang/isString",["./isKind"],function(a){function b(b){return a(b,"String")}return b}),define("Utils/array/indexOf",[],function(){var a=Array.prototype.indexOf?function(a,b,c){return a.indexOf(b,c)}:function(a,b,c){c=c||0;var d=a.length>>>0,e=c<0?d+c:c;for(;e<d;e++)if(a[e]===b)return e;return-1};return a}),define("Utils/array/contains",["./indexOf"],function(a){function b(b,c){return a(b,c)!==-1}return b}),define("Utils/array/every",[],function(){var a=Array.prototype.every?function(a,b,c){return a.every(b,c)}:function(a,b,c){var d=!0,e=a.length>>>0;while(e--)if(e in a&&!b.call(c,a[e],e,a)){d=!1;break}return d};return a}),define("Utils/lang/isObject",["./isKind"],function(a){function b(b){return a(b,"Object")}return b}),define("Utils/lang/isArray",["./isKind"],function(a){var b=Array.isArray||function(b){return a(b,"Array")};return b}),define("Utils/lang/isUndefined",[],function(){function b(b){return b===a}var a;return b}),define("Utils/object/hasOwn",[],function(){function a(a,b){return Object.prototype.hasOwnProperty.call(a,b)}return a}),define("Utils/object/forOwn",["../lang/isObject","./hasOwn"],function(a,b){function e(){d=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=!0;for(var a in{toString:null})c=!1}function f(b,f,h){var i,j=0;if(!a(b))throw new TypeError("forOwn called on a non-object");c==null&&e();for(i in b)g(f,b,i,h);if(c)while(i=d[j++])g(f,b,i,h)}function g(a,c,d,e){b(c,d)&&a.call(e,c[d],d,c)}var c,d;return f}),define("Utils/object/keys",["./forOwn"],function(a){var b=Object.keys||function(b){var c=[];return a(b,function(a,b){c.push(b)}),c};return b}),define("Utils/object/mixIn",["./hasOwn"],function(a){function b(b,c){var d=1,e=arguments.length,f,g;while(g=arguments[d++])for(f in g)a(g,f)&&(b[f]=g[f]);return b}return b}),define("Utils/lang/createObject",["../object/mixIn"],function(a){function b(b,c){function d(){}return d.prototype=b,a(new d,c)}return b}),define("Utils/array/forEach",[],function(){var a=Array.prototype.forEach?function(a,b,c){a.forEach(b,c)}:function(a,b,c){for(var d=0,e=a.length>>>0;d<e;d++)d in a&&b.call(c,a[d],d,a)};return a}),define("Utils/array/filter",["./forEach"],function(a){var b=Array.prototype.filter?function(a,b,c){return a.filter(b,c)}:function(b,c,d){var e=[];return a(b,function(a,b,f){c.call(d,a,b,f)&&e.push(a)}),e};return b}),define("Utils/array/unique",["./indexOf","./filter"],function(a,b){function c(a){return b(a,d)}function d(b,c,d){return a(d,b,c+1)===-1}return c}),define("Utils/array/intersection",["./unique","./filter","./every","./contains"],function(a,b,c,d){function e(e){var f=Array.prototype.slice.call(arguments,1),g=b(a(e),function(a){return c(f,function(b){return d(b,a)})});return g}return e}),define("Utils/array/combine",["./indexOf"],function(a){function b(b,c){var d,e=c.length;for(d=0;d<e;d++)a(b,c[d])===-1&&b.push(c[d]);return b}return b}),define("Utils/array/append",[],function(){function a(a,b){return Array.prototype.push.apply(a,b),a}return a}),define("Utils/lang/bind",[],function(){function a(a,b){return Array.prototype.slice.call(a,b||0)}function b(b,c,d){var e=a(arguments,2);return function(){return b.apply(c,e.concat(a(arguments)))}}return b}),define("Utils/lang/isArguments",["./isKind"],function(a){var b=a(arguments,"Arguments")?function(b){return a(b,"Arguments")}:function(a){return!!a&&!!Object.prototype.hasOwnProperty.call(a,"callee")};return b}),define("Utils/lang/toArray",["./isArray","./isObject","./isArguments"],function(a,b,c){function e(e){var f;return e==null?f=[]:e&&e!==d&&(a(e)||c(e)||b(e)&&"length"in e)?f=Array.prototype.slice.call(e):f=[e],f}var d=this;return e}),define("Utils/array/some",["require"],function(a){var b=Array.prototype.some?function(a,b,c){return a.some(b,c)}:function(a,b,c){var d=!1,e=a.length>>>0;while(e--)if(e in a&&b.call(c,a[e],e,a)){d=!0;break}return d};return b}),define("Utils/array/difference",["./unique","./filter","./some","./contains"],function(a,b,c,d){function e(e){var f=Array.prototype.slice.call(arguments,1),g=b(a(e),function(a){return!c(f,function(b){return d(b,a)})});return g}return e}),define("Utils/array/insert",["./difference","../lang/toArray"],function(a,b){function c(c,d){var e=a(b(arguments).slice(1),c);return e.length&&Array.prototype.push.apply(c,e),c.length}return c}),define("Classify.Interface",["Utils/lang/isObject","Utils/lang/isFunction","Utils/object/hasOwn","Utils/object/forOwn","Utils/array/contains","Utils/array/combine","Utils/lang/createObject"],function(a,b,c,d,e,f,g){function h(h){function j(g){var i=g.Super?g.Super.$constructor:null;g.$statics=[];if(c(g.prototype,"Statics")){if(!a(g.prototype.Statics))throw new TypeError('Statics definition for "'+h.Name+'" must be an object.');(function(a){var b=["$class","$abstract","$interface","$binds","$statics"];d(a,function(c,d){if(e(b,d))throw new TypeError('Class "'+a.Name+'" is using a reserved static word: '+d)})})(g.prototype.Statics),d(g.prototype.Statics,function(a,c){b(a)&&g.$statics.push(c)})}i&&i.$statics?f(g.$statics,i.$statics):g.$statics.length||delete g.$statics}if(!a(h))throw new TypeError('Argument "params" must be an object.');(function(a){var b=["$constructor","$initializing"];d(a,function(c,d){if(e(b,d))throw new TypeError('Class "'+a.Name+'" is using a reserved word: '+d)})})(h);var i=function(){throw new Error("Interfaces cannot be instantiated.")};h.Name=h.Name||"Unnamed";if(c(h,"Extends")){if(!b(h.Extends)||!h.Extends.$interface)throw new TypeError('The parent interface of "'+h.Name+'" is not a valid interface (defined in Extends).');i.Super=h.Extends.prototype,delete h.Extends,i.prototype=g(i.Super,h),delete i.prototype.Extends}else i.prototype=h;return i.prototype.$constructor=i,j(i),delete i.prototype.Statics,i.$interface=!0,i}return h}),define("Classify.Abstract",["Utils/lang/isObject","Utils/lang/isFunction","Utils/object/forOwn","Utils/object/hasOwn","Utils/array/forEach","Utils/lang/toArray","Utils/array/combine","Utils/array/insert","Trinity/Classify","require"],function(a,b,c,d,e,f,g,h,i,j){return function(k){function p(d,e,f){c(d,function(g,i){if(i!=="Name"&&i!=="$constructor")if(i!=="Statics")h(e.normal,i);else{if(!a(d.Statics))throw new TypeError('Statics definition for abstract class "'+f+'" must be an object.');c(d.Statics,function(a,c){b(a)&&h(e.statics,c)})}}),d.$constructor&&d.$constructor.$statics&&g(e.statics,d.$constructor.$statics)}i=j("Trinity/Classify");var l;if(!a(k))throw new TypeError('Argument "params" must be an object.');k.Name=k.Name||"Unnamed";var m=k.initialize,n,o={normal:[],statics:[]};if(d(k,"Abstracts")){if(!a(k.Abstracts))throw new TypeError('Abstracts defined in abstract class "'+k.Name+"' must be an object.");p(k.Abstracts,o,k.Name),delete k.Abstracts}return d(k,"Implements")&&(e(f(k.Implements),function(a,c){if(!b(a)||!a.$interface)throw new TypeError("Unexpected interface at index "+c+' for abstract class "'+a.prototype.Name+"'.");p(a.prototype,o,k.Name)}),delete k.Implements),b(k.Extends)?(n=k.Extends,k.Extends.$class&&(m=m||function(){n.prototype.initialize.apply(this,arguments)}),k.Extends.$abstract&&(g(o.normal,k.Extends.$abstract.normal),g(o.statics,k.Extends.$abstract.statics))):m=m||function(){},k.initialize=function(){if(!this.$initializing)throw new Error("An abstract class cannot be instantiated.");m.apply(this,arguments)},k.$abstract=!0,l=i(k),delete l.prototype.$abstract,l.$abstract=o,l}}),define("Trinity/Classify",["Utils/lang/isFunction","Utils/lang/isString","Utils/array/contains","Utils/array/intersection","Utils/array/unique","Utils/object/forOwn","Utils/lang/isObject","Utils/lang/isArray","Utils/lang/isUndefined","Utils/lang/createObject","Utils/object/mixIn","Utils/object/keys","Utils/object/hasOwn","Utils/array/forEach","Utils/array/combine","Utils/array/append","Utils/lang/bind","Utils/lang/toArray","Classify.Abstract","Classify.Interface"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){function u(s){function w(a,b){a.$statics&&(b.$statics||(b.$statics=[]),n(a.$statics,function(c){i(b[c])&&(b[c]=a[c],b.$statics.push(c))}),b.$statics.length||delete b.$statics)}function x(b,c){var d,f,j,l;l=r(b);if(!l.length&&!h(b))throw new TypeError('Borrows of "'+c.prototype.Name+'" must be a class/object or an array of classes/objects.');if(l.length!==e(l).length)throw new Error('There are duplicate entries defined in Borrows of "'+c.prototype.Name+'".');for(d=l.length-1;d>=0;d-=1){if((!a(l[d])||!l[d].$class||l[d].$abstract)&&(!g(l[d])||l[d].$constructor))throw new TypeError("Entry at index "+d+' in Borrows of class "'+c.prototype.Name+'" is not a valid class/object (abstract classes and instances of classes are not supported).');if(g(l[d]))try{f=u(k({},l[d])).prototype}catch(n){throw new Error("Unable to define object as class at index "+d+' in Borrows of class "'+c.prototype.Name+'": '+n.message)}else f=l[d].prototype;for(j in f)if(!m(c.prototype,j)||i(c.prototype[j]))c.prototype[j]=f[j];w(f.$constructor,c),f.$constructor.$binds&&(c.$binds=c.$binds||[],o(c.$binds,f.$constructor.$binds))}}function y(a,b,c){var d;for(d=a.length-1;d>=0;d-=1)c[a[d]]=q(c[a[d]],b)}function z(b,c){b=r(b);var d=function(b){if(!a(c[b])||!m(c,b))throw new Error('Class "'+c.prototype.Name+'" does not implement interface "'+this.prototype.Name+'" correctly, static method "'+b+'()" was not found.')};n(b,function(b,e){var f;if(!a(b)||!b.$interface)throw new TypeError("Entry at index "+e+' in Implements of class "'+s.Name+'" is not a valid interface.');for(f in b.prototype)if(f!=="Name"&&f!=="$constructor"&&a(b.prototype[f])&&(!a(c.prototype[f])||!m(c.prototype,f)))throw new Error('Class "'+c.prototype.Name+'" does not implement interface "'+b.prototype.Name+'" correctly, method "'+f+'()" was not found.');b.$statics&&n(b.$statics,d,b)})}function A(b,c){var d=b.$abstract;n(d.normal,function(d){if(!a(c.prototype[d])||!m(c.prototype,d))throw new Error('Class "'+c.prototype.Name+'" does not implement abstract class "'+b.prototype.Name+'" correctly, method "'+d+'()" was not found.')}),n(d.statics,function(d){if(!a(c[d])||!m(c,d))throw new Error('Class "'+c.prototype.Name+'" does not implement abstract class "'+b.prototype.Name+'" correctly, static method "'+d+'()" was not found.')})}function B(c){var f=c.Super?c.Super.$constructor:null,g=r(c.prototype.Binds);if(!g.length&&!h(c.prototype.Binds))throw new TypeError('Binds of "'+c.prototype.Name+'" must be a string or an array of strings.');if(g.length!==e(g).length)throw new Error('There are duplicate binds in "'+c.prototype.Name+'".');if(d(c.$binds||[],g).length>0)throw new Error('There are binds in "'+c.prototype.Name+'" that are already being bound by a mixin (used in Borrows).');c.$binds?p(c.$binds,g):c.$binds=g;if(f&&f.$binds){if(d(c.$binds,f.$binds).length>0)throw new Error('There are binds in "'+c.prototype.Name+'" that are already being bound in the parent class.');p(c.$binds,f.$binds)}else c.$binds.length||delete c.$binds;c.$binds&&n(c.$binds,function(d){if(!b(d))throw new TypeError('All bind entries of "'+c.Name+'" must be a string.');if(!a(c.prototype[d]))throw new Error('Method "'+d+'()" referenced in "'+c.Name+'" binds does not exist.')})}function C(a){if(m(a.prototype,"Statics")){if(!g(a.prototype.Statics))throw new TypeError('Statics definition for "'+s.Name+'" must be an object.');(function(a){var b=["$class","$abstract","$interface","$binds","$statics"];f(a,function(d,e){if(c(b,e))throw new TypeError('Class "'+a.Name+'" is using a reserved static word: '+e)})})(a.prototype.Statics),k(a,a.prototype.Statics),a.$statics=l(a.prototype.Statics)}a.Super&&w(a.Super.$constructor,a)}function D(a){var b;for(b in a)h(a[b])?a[b]=[].concat(a[b]):g(a[b])&&(a[b]=k({},a[b]))}function E(a){return function(){D(this),this.$constructor.$binds&&y(this.$constructor.$binds,this,this),this.$constructor.$abstract||(this.$initializing=!0),a.apply(this,arguments),delete this.$initializing}}if(!g(s))throw new TypeError('Argument "params" must be an object.');s.Name=s.Name||"Unnamed",function(a){var b=["$constructor","$initializing"];f(a,function(d,e){if(c(b,e))throw new TypeError('Class "'+a.Name+'" is using a reserved word: '+e)})}(s);if(m(s,"Abstracts")&&!s.$abstract)throw new Error('Class "'+s.Name+'" has abstract methods, therefore it must be defined as abstract.');var t,v;if(m(s,"Extends")){if(!a(s.Extends)||!s.Extends.$class)throw new TypeError('Specified parent class in Extends of "'+s.Name+'" is not a valid class.');v=s.Extends,delete s.Extends,s.initialize=s.initialize||function(){v.prototype.initialize.apply(this,arguments)},t=E(s.initialize),t.Super=v.prototype,t.prototype=j(v.prototype,s)}else s.initialize=s.initialize||function(){},t=E(s.initialize),t.prototype=s;return t.prototype.$constructor=t,t.$class=!0,C(t),m(s,"Borrows")&&(x(s.Borrows,t),delete t.prototype.Borrows),m(s,"Binds")&&(B(t),delete t.prototype.Binds),v&&v.$abstract&&!s.$abstract&&A(v,t),m(s,"Implements")&&(s.$abstract||z(s.Implements,t),delete t.prototype.Implements),m(s,"Statics")&&delete t.prototype.Statics,t}return u.Abstract=s,u.Interface=t,u})