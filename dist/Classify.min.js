define("Utils/lang/kindOf",[],function(){function d(d){return d===null?"Null":d===c?"Undefined":a.exec(b.call(d))[1]}var a=/^\[object (.*)\]$/,b=Object.prototype.toString,c;return d}),define("Utils/lang/isKind",["./kindOf"],function(a){function b(b,c){return a(b)===c}return b}),define("Utils/lang/isFunction",["./isKind"],function(a){function b(b){return a(b,"Function")}return b}),define("Utils/lang/isString",["./isKind"],function(a){function b(b){return a(b,"String")}return b}),define("Utils/array/every",[],function(){var a=Array.prototype.every?function(a,b,c){return a.every(b,c)}:function(a,b,c){var d=!0,e=a.length>>>0;while(e--)if(e in a&&!b.call(c,a[e],e,a)){d=!1;break}return d};return a}),define("Utils/array/indexOf",[],function(){var a=Array.prototype.indexOf?function(a,b,c){return a.indexOf(b,c)}:function(a,b,c){c=c||0;var d=a.length>>>0,e=c<0?d+c:c;for(;e<d;e++)if(a[e]===b)return e;return-1};return a}),define("Utils/array/contains",["./indexOf"],function(a){function b(b,c){return a(b,c)!==-1}return b}),define("Utils/object/hasOwn",[],function(){function a(a,b){return Object.prototype.hasOwnProperty.call(a,b)}return a}),define("Utils/lang/isObject",["./isKind"],function(a){function b(b){return a(b,"Object")}return b}),define("Utils/object/forOwn",["../lang/isObject","./hasOwn"],function(a,b){function e(){d=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=!0;for(var a in{toString:null})c=!1}function f(b,f,h){var i,j=0;if(!a(b))throw new TypeError("forOwn called on a non-object");c==null&&e();for(i in b)g(f,b,i,h);if(c)while(i=d[j++])g(f,b,i,h)}function g(a,c,d,e){b(c,d)&&a.call(e,c[d],d,c)}var c,d;return f}),define("Utils/lang/isArray",["./isKind"],function(a){var b=Array.isArray||function(b){return a(b,"Array")};return b}),define("Utils/lang/isUndefined",[],function(){function b(b){return b===a}var a;return b}),define("Utils/object/mixIn",["./hasOwn"],function(a){function b(b,c){var d=1,e=arguments.length,f,g;while(g=arguments[d++])for(f in g)a(g,f)&&(b[f]=g[f]);return b}return b}),define("Utils/lang/createObject",["../object/mixIn"],function(a){function b(b,c){function d(){}return d.prototype=b,a(new d,c)}return b}),define("Utils/object/keys",["./forOwn"],function(a){var b=Object.keys||function(b){var c=[];return a(b,function(a,b){c.push(b)}),c};return b}),define("Utils/array/forEach",[],function(){var a=Array.prototype.forEach?function(a,b,c){a.forEach(b,c)}:function(a,b,c){for(var d=0,e=a.length>>>0;d<e;d++)d in a&&b.call(c,a[d],d,a)};return a}),define("Utils/array/filter",["./forEach"],function(a){var b=Array.prototype.filter?function(a,b,c){return a.filter(b,c)}:function(b,c,d){var e=[];return a(b,function(a,b,f){c.call(d,a,b,f)&&e.push(a)}),e};return b}),define("Utils/array/unique",["./indexOf","./filter"],function(a,b){function c(a){return b(a,d)}function d(b,c,d){return a(d,b,c+1)===-1}return c}),define("Utils/array/intersection",["./unique","./filter","./every","./contains"],function(a,b,c,d){function e(e){var f=Array.prototype.slice.call(arguments,1),g=b(a(e),function(a){return c(f,function(b){return d(b,a)})});return g}return e}),define("Utils/array/combine",["./indexOf"],function(a){function b(b,c){var d,e=c.length;for(d=0;d<e;d++)a(b,c[d])===-1&&b.push(c[d]);return b}return b}),define("Utils/array/append",[],function(){function a(a,b){return Array.prototype.push.apply(a,b),a}return a}),define("Utils/lang/bind",[],function(){function a(a,b){return Array.prototype.slice.call(a,b||0)}function b(b,c,d){var e=a(arguments,2);return function(){return b.apply(c,e.concat(a(arguments)))}}return b}),define("Utils/lang/isArguments",["./isKind"],function(a){var b=a(arguments,"Arguments")?function(b){return a(b,"Arguments")}:function(a){return!!a&&!!Object.prototype.hasOwnProperty.call(a,"callee")};return b}),define("Utils/lang/toArray",["./isArray","./isObject","./isArguments"],function(a,b,c){function e(e){var f;return e==null?f=[]:e&&e!==d&&(a(e)||c(e)||b(e)&&"length"in e)?f=Array.prototype.slice.call(e):f=[e],f}var d=this;return e}),define("Utils/array/union",["./unique"],function(a){function b(b){return a(Array.prototype.concat.apply([],arguments))}return b}),define("Utils/array/some",["require"],function(a){var b=Array.prototype.some?function(a,b,c){return a.some(b,c)}:function(a,b,c){var d=!1,e=a.length>>>0;while(e--)if(e in a&&b.call(c,a[e],e,a)){d=!0;break}return d};return b}),define("Utils/array/difference",["./unique","./filter","./some","./contains"],function(a,b,c,d){function e(e){var f=Array.prototype.slice.call(arguments,1),g=b(a(e),function(a){return!c(f,function(b){return d(b,a)})});return g}return e}),define("Utils/array/insert",["./difference","../lang/toArray"],function(a,b){function c(c,d){var e=a(b(arguments).slice(1),c);return e.length&&Array.prototype.push.apply(c,e),c.length}return c}),define("Utils/Array/indexOf",[],function(){var a=Array.prototype.indexOf?function(a,b,c){return a.indexOf(b,c)}:function(a,b,c){c=c||0;var d=a.length>>>0,e=c<0?d+c:c;for(;e<d;e++)if(a[e]===b)return e;return-1};return a}),define("Utils/Array/combine",["./indexOf"],function(a){function b(b,c){var d,e=c.length;for(d=0;d<e;d++)a(b,c[d])===-1&&b.push(c[d]);return b}return b}),define("Classify.Interface",["Utils/lang/isObject","Utils/lang/isFunction","Utils/object/forOwn","Utils/Array/combine","Utils/lang/createObject"],function(a,b,c,d,e){function f(f){function h(e){var g=e.Super?e.Super.$constructor:null;e.$statics=[];if(e.prototype.Statics){if(!a(e.prototype.Statics))throw new TypeError('Statics definition for "'+f.Name+'" must be an object.');(function(a){var b=["$class","$abstract","$interface","$binds","$statics"];c(a,function(c,d){if(b.indexOf(d)!==-1)throw new TypeError('Class "'+a.Name+'" is using a reserved static word: '+d)})})(e.prototype.Statics),c(e.prototype.Statics,function(a,c){b(a)&&e.$statics.push(c)})}g&&g.$statics?d(e.$statics,g.$statics):e.$statics.length||delete e.$statics}if(!a(f))throw new TypeError('Argument "params" must be an object.');(function(a){var b=["$constructor","$initializing"];c(a,function(c,d){if(b.indexOf(d)!==-1)throw new TypeError('Class "'+a.Name+'" is using a reserved word: '+d)})})(f);var g=function(){throw new Error("Interfaces cannot be instantiated.")};f.Name=f.Name||"Unnamed";if(f.Extends){if(!b(f.Extends)||!f.Extends.$interface)throw new TypeError('The parent interface of "'+f.Name+'" is not a valid interface (defined in Extends).');g.Super=f.Extends.prototype,delete f.Extends,g.prototype=e(g.Super,f),delete g.prototype.Extends}else g.prototype=f;return g.prototype.$constructor=g,h(g),delete g.prototype.Statics,g.$interface=!0,g}return f}),define("Classify.Abstract",["Utils/lang/isObject","Utils/lang/isFunction","Utils/object/forOwn","Utils/array/forEach","Utils/lang/toArray","Utils/array/union","Utils/array/insert","Trinity/Classify","require"],function(a,b,c,d,e,f,g,h,i){return function(j){function o(d,e,f){c(d,function(h,i){if(i!=="Statics")g(e.normal,i);else{if(!a(d.Statics))throw new TypeError('Statics definition for abstract class "'+f+'" must be an object.');c(d.Statics,function(a,c){b(a)&&g(e.statics,c)})}})}h=i("Trinity/Classify");var k;if(!a(j))throw new TypeError('Argument "params" must be an object.');j.Name=j.Name||"Unnamed";var l=j.initialize,m,n={normal:[],statics:[]};if(j.Abstracts){if(!a(j.Abstracts))throw new TypeError('Abstracts defined in abstract class "'+j.Name+"' must be an object.");o(j.Abstracts,n,j.Name),delete j.Abstracts}return j.Implements&&(d(e(j.Implements),function(a,c){if(!b(a)||!a.$interface)throw new TypeError("Unexpected interface at index "+c+' for abstract class "'+a.prototype.Name+"'.");o(a.prototype,n,j.Name)}),delete j.Implements),j.Extends&&b(j.Extends)?(m=j.Extends,j.Extends.$class&&(l=l||function(){m.prototype.initialize.apply(this,arguments)}),j.Extends.$abstract&&(n.normal=f(n.normal,j.Extends.$abstract.normal),n.statics=f(n.statics,j.Extends.$abstract.statics))):l=l||function(){},j.initialize=function(){if(!this.$initializing)throw new Error("An abstract class cannot be instantiated.");l.apply(this,arguments)},j.$abstract=!0,k=h(j),delete k.prototype.$abstract,k.$abstract=n,k}}),define("Trinity/Classify",["Utils/lang/isFunction","Utils/lang/isString","Utils/array/intersection","Utils/array/unique","Utils/object/forOwn","Utils/lang/isObject","Utils/lang/isArray","Utils/lang/isUndefined","Utils/lang/createObject","Utils/object/mixIn","Utils/object/keys","Utils/array/forEach","Utils/array/combine","Utils/array/append","Utils/lang/bind","Utils/lang/toArray","Classify.Abstract","Classify.Interface"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(q){function u(a,b){a.$statics&&(b.$statics||(b.$statics=[]),l(a.$statics,function(c){h(b[c])&&(b[c]=a[c],b.$statics.push(c))}),b.$statics.length||delete b.$statics)}function v(b,c){b=p(b);if(b.length!==d(b).length)throw new Error('There are duplicate entries defined in Borrows of "'+c.prototype.Name+'".');var e,g,i;for(e=b.length-1;e>=0;e-=1){if((!a(b[e])||!b[e].$class||b[e].$abstract)&&(!f(b[e])||b[e].$constructor))throw new TypeError("Entry at index "+e+' in Borrows of class "'+c.prototype.Name+'" is not a valid class/object (abstract classes and instances of classes are not supported). ');if(f(b[e]))try{g=s(j({},b[e])).prototype}catch(k){throw new Error("Unable to define object as class at index "+e+' in Borrows of class "'+c.prototype.Name+'": '+k.message)}else g=b[e].prototype;for(i in g)h(c.prototype[i])&&(c.prototype[i]=g[i]);u(g.$constructor,c),g.$constructor.$binds&&(c.$binds=c.$binds||[],m(c.$binds,g.$constructor.$binds))}}function w(a,b,c){var d;for(d=a.length-1;d>=0;d-=1)c[a[d]]=o(c[a[d]],b)}function x(b,c){b=p(b);var d=function(b){if(!a(c[b]))throw new Error('Class "'+c.prototype.Name+'" does not implement interface "'+this.prototype.Name+'" correctly, static method "'+b+'()" was not found.')};l(b,function(b,e){var f;if(!a(b)||!b.$interface)throw new TypeError("Entry at index "+e+' in Implements of class "'+q.Name+'" is not a valid interface.');for(f in b.prototype)if(a(b.prototype[f])&&!a(c.prototype[f]))throw new Error('Class "'+c.prototype.Name+'" does not implement interface "'+b.prototype.Name+'" correctly, method "'+f+'()" was not found.');b.$statics&&l(b.$statics,d,b)})}function y(b,c){var d=b.$abstract;l(d.normal,function(d){if(!a(c.prototype[d]))throw new Error('Class "'+c.prototype.Name+'" does not implement abstract class "'+b.prototype.Name+'" correctly, method "'+d+'()" was not found.')}),l(d.statics,function(d){if(!a(c[d]))throw new Error('Class "'+c.prototype.Name+'" does not implement abstract class "'+b.prototype.Name+'" correctly, static method "'+d+'()" was not found.')})}function z(e){var f=e.Super?e.Super.$constructor:null,g=e.prototype;if((g.Binds||[]).length!==d(g.Binds||[]).length)throw new Error('There are duplicate binds in "'+g.Name+'".');if(c(e.$binds||[],g.Binds||[]).length>0)throw new Error('There are binds in "'+g.Name+'" that are already being bound by a mixin (used in Borrows).');e.$binds?g.Binds&&n(e.$binds,g.Binds):e.$binds=g.Binds||[];if(f&&f.$binds){if(c(e.$binds,f.$binds).length>0)throw new Error('There are binds in "'+g.Name+'" that are already being bound in the parent class.');n(e.$binds,f.$binds)}else e.$binds.length||delete e.$binds;e.$binds&&l(e.$binds,function(c){if(!b(c))throw new TypeError('All bind entries of "'+g.Name+'" must be a string.');if(!a(g[c]))throw new Error('Method "'+c+'()" referenced in "'+g.Name+'" binds does not exist.')})}function A(a){if(a.prototype.Statics){if(!f(a.prototype.Statics))throw new TypeError('Statics definition for "'+q.Name+'" must be an object.');(function(a){var b=["$class","$abstract","$interface","$binds","$statics"];e(a,function(c,d){if(b.indexOf(d)!==-1)throw new TypeError('Class "'+a.Name+'" is using a reserved static word: '+d)})})(a.prototype.Statics),j(a,a.prototype.Statics),a.$statics=k(a.prototype.Statics)}a.Super&&u(a.Super.$constructor,a)}function B(a){var b;for(b in a)g(a[b])?a[b]=[].concat(a[b]):f(a[b])&&(a[b]=j({},a[b]))}function C(a){return function(){B(this),this.$constructor.$binds&&w(this.$constructor.$binds,this,this),this.$constructor.$abstract||(this.$initializing=!0),a.apply(this,arguments),delete this.$initializing}}if(!f(q))throw new TypeError('Argument "params" must be an object.');q.Name=q.Name||"Unnamed",function(a){var b=["$constructor","$initializing"];e(a,function(c,d){if(b.indexOf(d)!==-1)throw new TypeError('Class "'+a.Name+'" is using a reserved word: '+d)})}(q);if(q.Abstracts&&!q.$abstract)throw new Error('Class "'+q.Name+'" has abstract methods, therefore it must be defined as abstract.');var r,t;if(q.Extends){if(!a(q.Extends)||!q.Extends.$class)throw new TypeError('Specified parent class in Extends of "'+q.Name+'" is not a valid class.');t=q.Extends,delete q.Extends,q.initialize=q.initialize||function(){t.prototype.initialize.apply(this,arguments)},r=C(q.initialize),r.Super=t.prototype,r.prototype=i(t.prototype,q)}else q.initialize=q.initialize||function(){},r=C(q.initialize),r.prototype=q;return r.prototype.$constructor=r,r.$class=!0,A(r),q.Borrows&&(v(q.Borrows,r),delete r.prototype.Borrows),q.Binds&&(z(r),delete r.prototype.Binds),t&&t.$abstract&&!q.$abstract&&y(t,r),q.Implements&&(q.$abstract||x(q.Implements,r),delete r.prototype.Implements),q.Statics&&delete r.prototype.Statics,r}return s.Abstract=q,s.Interface=r,s})